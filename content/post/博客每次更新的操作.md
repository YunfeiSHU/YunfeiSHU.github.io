+++
date = '2025-09-05T20:20:00+08:00'
draft = true
title = 'åšå®¢æ¯æ¬¡æ›´æ–°çš„æ“ä½œ'
tags = ['hugo-blog']
+++
**æ—¥å¸¸å†™ä½œ & å‘å¸ƒï¼ˆæ¯æ¬¡æ›´æ–°éƒ½è¿™ä¹ˆåšï¼‰**ï¼š

1. åœ¨ **main** åˆ†æ”¯ç¼–è¾‘/æ–°å¢æ–‡ç« ï¼ˆä¾‹å¦‚ï¼‰

```bash
hugo new post/hello-paper-mod.md
# ç¼–è¾‘ content/posts/hello-paper-mod.mdï¼ŒæŠŠ draft æ”¹æˆ false
```

2. æäº¤æºç å˜æ›´ï¼ˆä»åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼‰

```bash
git add .
git commit -m "post: hello paper mod"
git push
```

3. ç”Ÿæˆå¹¶å‘å¸ƒåˆ° `doc`ï¼ˆworktree çš„ `public/`ï¼‰

```bash
hugo
cd public
git add -A
git commit -m "publish: $(Get-Date -Format 'yyyy-MM-dd HH:mm:ss')"
git push
cd ..
```

å®Œæˆï¼ç½‘é¡µå°±ä¼šæ›´æ–°å•¦ ğŸ‰

------

**ä¸€é”®å‘å¸ƒè„šæœ¬**ï¼š

åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»º `deploy.ps1`ï¼š

```bash
param(
  [string]$Message = "publish: $(Get-Date -Format 'yyyy-MM-dd HH:mm:ss')"
)

# 1) æäº¤ main çš„æºç 
git add .
git commit -m "content: $Message" 2>$null
git push

# 2) ç¡®ä¿ public ç»‘å®šäº† docï¼ˆé¦–æ¬¡å·²åšè¿‡ï¼›è‹¥æœªåšè¿‡åˆ™è‡ªåŠ¨ç»‘å®šï¼‰
if (-not (Test-Path -Path ".git\worktrees\public")) {
  if (Test-Path -Path "public") { Remove-Item -Recurse -Force .\public }
  git worktree add -B doc public
}

# 3) æ„å»º & å‘å¸ƒåˆ° doc
hugo
Push-Location public
git add -A
git commit -m $Message 2>$null
git push
Pop-Location

Write-Host "âœ… Deployed to 'doc' branch."
```

ä»¥ååªéœ€ï¼š

```bash
.\deploy.ps1 -Message "update post: xxxxx"
```