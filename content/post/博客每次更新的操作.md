+++
date = '2025-09-05T20:20:00+08:00'
draft = false
title = '博客每次更新的操作'
tags = ['hugo-blog']
summary = '博客每次更新时的git操作'
+++
**注意**： `draft = false` 和 `summary='xxx' `

**日常写作 & 发布（每次更新都这么做）**：

1. 在 **main** 分支编辑/新增文章（例如）

```bash
hugo new post/hello-paper-mod.md
# 编辑 content/posts/hello-paper-mod.md，把 draft 改成 false
```

2. 提交源码变更（仍在项目根目录）

```bash
git add .
git commit -m "post: hello paper mod"
git push
```

3. 生成并发布到 `doc`（worktree 的 `public/`）

```bash
hugo
cd public
git add -A
git commit -m "publish: $(Get-Date -Format 'yyyy-MM-dd HH:mm:ss')"
git push
cd ..
```

完成！网页就会更新啦 🎉

------

**一键发布脚本**：

在项目根目录新建 `deploy.sh`：

```bash
#!/bin/bash

echo "📝 提交源码到 main 分支..."
git add .
git commit -m "${1:-update post}" 2>/dev/null
git push origin main

echo "⚡ 构建 Hugo..."
hugo

echo "📂 提交静态文件到 doc 分支..."
cd public || exit
git add -A
git commit -m "publish: $(date '+%Y-%m-%d %H:%M:%S')" 2>/dev/null
git push origin doc
cd ..

echo "✅ Hugo site deployed to doc branch!"

# 暂停，等待用户确认
read -p "Press Enter to exit..."

```

**通过git bash**：

```bash
./deploy.sh "XXXX.md"
```